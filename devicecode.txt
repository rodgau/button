/** LED turns on or off via an imp Event handler.
* Event:  a button changes state (i.e. either  pressed or released).
* Handler: read button pin's' digital state and set LED pin to match.
* 
* Revision History
*   Build:
*   008: working base
*/

led <- hardware.pin9;
led.configure(DIGITAL_OUT);

button1 <- hardware.pin1;
ledState <- 0;

// event handler - button press/release
function button1_handler()
{
// this fires whenever button either presses or releases
// Could simply toggle ledState here, but I've found that with
// very button presses it can get out of sync.

	ledState <- button1.read();
	server.log("Set LED: " + ledState);
	led.write(ledState);
}

// start above defined button handler
button1.configure( DIGITAL_IN, button1_handler );


// main loop
function main() {
	server.log( "bumBump...");
	imp.wakeup(3.0, main);
}

// start main loop
main();